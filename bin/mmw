source $HOME/mmw/test/tmp/config
setProj(){
  sed -i "s/PROJ=.*/PROJ=$1/g" $HOME/mmw/test/tmp/config
}

setProjLoc(){
  sed -i "s|PROJLOC=.*|PROJLOC=$1|g" $HOME/mmw/test/tmp/config
}

createProj(){
  #test -d $PROJPATH && echo "$PROJ exists" || (test -f $PROJPATH && echo "$PROJ  exists" || echo "$PROJ does not exist")

  if test -d $PROJPATH; then
      echo "Directory exists"
  elif test -f  $PROJPATH; then
      echo "$PROJ exists"
  else
      read -p "$PROJPATH does not exist. Do you want to create it? (y/n): " choice
      if [[ $choice == "y" ]]; then
          mkdir $PROJPATH
          mkdir $PROJPATH/src
          mkdir $PROJPATH/session
          mkdir $PROJPATH/session/1
          mkdir $PROJPATH/sound_design
          mkdir $PROJPATH/tmp
          echo "$PROJ created"
      else
          echo "$PROJ not created"
      fi
  fi
}

rec(){
  # Set the variables
  tempo=$1
  instr_volume=$4
  drum_volume=$5
  
  # Generate the ecasound command
  ecasound_command="ecasound -n $PROJ -f:16,2,48000 \ "$'\n'
  ecasound_command+="         -a:instr -i $AUDIO$2$FILE -ea:$instr_volume \ "$'\n'
  ecasound_command+="         -a:2,3 -i jack,system,1,0 \ "$'\n'
  ecasound_command+="         -a:2 -o $AUDIO$3$FILE -ea:$drum_volume \ "$'\n'
  ecasound_command+="         -a:met -i:null -pn:metronome,$tempo -ea:1 \ "$'\n'
  ecasound_command+="         -a:instr,3,met -o jack,system"
  
  # Save the command to a file
  echo "$ecasound_command" > "$HOME/mmw/bin/recmix"
  
  # Make the file executable
  chmod +x "$HOME/mmw/bin/recmix"
}

buildSheetMusic(){
  sheetbuilder $1 $2 $3 $4 $5 $6
}

createLyScoreAndMidiFile(){
  lilypond -dmidi-extension=mid $LILY
  mv $PROJ.mid $MIDI 
  mv $PROJ.pdf $PDF
  #lilypond-book --output=out --format=html $1.lytex
}

createSoundDesign(){
  modsyn $1 $2
}

renderAudio(){
  csound -d -o$PROJPATH/$PROJ.wav -F $PROJPATH/tmp/$PROJ.mid $PROJPATH/sound_design/$PROJ.csd
}

mvAudioToSite(){
  mv $PROJPATH/$PROJ.wav $HOME/Xuuki_Site_Node/site-app/public/audio/$PROJ.wav
}

convertAudio(){
  trackName="$1"
  channelNo="$2"  
  ffmpeg -i input_audio.wav -map_channel 0.$channelNo.0 $trackName.wav
}

"$@"
